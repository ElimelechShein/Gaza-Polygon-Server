# Gaza Polygon Server 🟦🟥🟨

שרת וובי לוקאלי להצגת ועיבוד פוליגונים (עזה + דלתא ק"מ), ללא תלות ברשת או בשירותים חיצוניים.

---
בפרויקט זה גם שרת פרונט וגם שרת בק
יש להריץ את שניהם יחד 
בכדי להריץ את הפרויקט יש להורדיד או למשוך שינויים ואז 
להרצה של הפרונט להריץ בתקייה הראשית 
npm i 
ואז
npm run dev

ואז בכדי להריץ את השרת בק לפתוח עוד טרמינל הרצה ע"י לחיצה על+פלוס 
ואז להיכנס לתקיית backend עם  הפקודה 
 cd backend
 ואז 
 npm i
 ואז 
 npm start



## 🎯 מטרות

- הצגת מפה מקומית של עזה עם buffer (דלתא ק"מ).
- קריאה, הוספה, מחיקה ועריכה של פוליגונים ב־3 קטגוריות:
  - **התרעה** (`alerts`)
  - **השתקה** (`mute`)
  - **סינון ירי כחול** (`friendly_fire`)
- שמירת הפוליגונים כקבצי JSON במערכת קבצים מקומית.
- האזנה לשינויים בתיקיות ועדכון המפה בזמן אמת.

---

## 🧱 מבנה תיקיות




אוקי כך  ייראה הג'ייסון החדש

זה המבנה הראשי 
{
  "cooldown_between_alerts_seconds": 30,  //לא לגעת לא רלוונטי אלינו

  "alert_areas": [...],                   //פוליגוני התרעה

  "muted_launch_areas": [...],            //פוליגוני השתקה

  "active_launch_areas": [...],           // פוליגוני סינון ירי כוחותינו

  "criza_ip": "192.168.1.100"              //לא לגעת לא רלוונטי אלינו
}



מפורט יותר 

{
  "cooldown_between_alerts_seconds": 30,
  "alert_areas": [
    {
      "id": "1750542520612",
       "name": "אזור אבטחה צפון",
      "coordinates": [
        [31.5430, 34.4600],
        [31.5500, 34.4700],
        [31.5450, 34.4800],
        [31.5380, 34.4700],
        [31.5430, 34.4600]
      ]
    },
    {
      "id": "12345678765432",
       "name": "אזור  צפון",
      "coordinates": [
        [31.3400, 34.3000],
        [31.3450, 34.3100],
        [31.3350, 34.3200],
        [31.3300, 34.3100],
        [31.3400, 34.3000]
      ]
    }
  ],
  "muted_launch_areas": [
    {
      "id": "098765456789",
       "name": "אזור אבטחה ",
      "coordinates": [
        [31.2400, 34.2500],
        [31.2450, 34.2600],
        [31.2500, 34.2550],
        [31.2400, 34.2500]
      ]
    }
  ],
  "active_launch_areas": [
    {
      "id": "876545676545676545",
       "name": "דיר אל בלאח",
      "coordinates": [
        [31.4200, 34.4000],
        [31.4250, 34.4050],
        [31.4300, 34.4000],
        [31.4250, 34.3950],
        [31.4200, 34.4000]
      ]
    },
    {
      "id": "234567876587654",
       "name": "דיר אל בלק",
      "coordinates": [
        [31.5600, 34.4800],
        [31.5650, 34.4850],
        [31.5700, 34.4800],
        [31.5650, 34.4750],
        [31.5600, 34.4800]
      ]
    }
  ],
  "criza_ip": "192.168.1.100"
}


 אפיון בקשות לשרת – פוליגונים
1. 📥 קבלת כל הפוליגונים
URL: GET /api/getPolygons
קלט: אין
תיאור: מחזיר את כל הפוליגונים הקיימים, ממוינים לפי סוג: alert_areas, muted_launch_areas, active_launch_areas.

פלט צפוי (response):

json
Copy code
{
  "alert_areas": [ {...}, {...} ],
  "muted_launch_areas": [ {...} ],
  "active_launch_areas": [ {...}, {...} ]
}
הערה: כל פוליגון הוא אובייקט עם השדות: id, name, coordinates, status, date (לא חובה בשרת, אם יש).

2. ➕ הוספת פוליגון חדש
URL: POST /api/addPolygon/:type
קלט: :type שייך לאחת מהקבוצות הבאות: 'alert_areas', 'muted_launch_areas', 'active_launch_areas'
     הbody מקבל פוליגון חדש
   
תיאור: מקבל פוליגון חדש ומוסיף אותו לקובץ הנתונים.

גוף הבקשה (request body):

json
Copy code
{
  "id": 1718828573347,
  "name": "פוליגון חדש",
  "status": "התרעה", // או "השתקה" או "סינון"
  "coordinates": [
    [31.5430, 34.4600],
    [31.5500, 34.4700],
    ...
  ],
  "date": "2025-06-18"
}
תשובה צפויה (response):

json
Copy code
{ "success": true, "message": "הפוליגון נשמר בהצלחה" }
פעולה בשרת: שמירה של הפוליגון החדש לתוך הקבוצה הרלוונטית בקובץ (לפי ה־status).

3. 🗑️ מחיקת פוליגון
URL: DELETE /api/deletePolygon/:id
קלט: id יהיה שם של הפוליגון

תיאור: מוחק פוליגון לפי מזהה (id) מתוך כל הקטגוריות.

דוגמה: DELETE /api/polygons/1718828573347

תשובה צפויה:

json
Copy code
{ "success": true, "message": "הפוליגון נמחק בהצלחה" }
4. ✏️ עריכת פוליגון קיים
URL: PUT /api/editPolygon/:type/:id
קלט: type מסמן את הקבוצה כמו בקלט של הוספת פוליגון חדש, id זה השם
הbody יכיל רק שדה אחד בשם newId שייצג את השם החדש
תיאור: מעדכן נתונים של פוליגון קיים לפי מזהה.

גוף הבקשה (request body):

json
Copy code
{
  "name": "שם חדש",
  "coordinates": [...],
  "status": "סינון",
  "date": "2025-06-18"
}
תשובה צפויה:

json
Copy code
{ "success": true, "message": "הפוליגון עודכן בהצלחה" }
פעולה בשרת: חיפוש הפוליגון לפי id, הסרה מהמיקום הקודם, ושמירה בקבוצה החדשה לפי status (אם השתנה).

